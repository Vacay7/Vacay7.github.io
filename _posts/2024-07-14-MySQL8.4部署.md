---
title: MySQL8.4在Windows部署
date: 2024-07-14 00:00:00 +8000
categories: [编程]
tags: [数据库]
---

## 1.配置环境变量

在系统环境变量Path中添加bin目录的路径

## 2.初始化配置

在bin的同级目录下新建一个my.ini文件

```ini
[client]
# 设置mysql客户端默认字符集
default-character-set=utf8

[mysql]
# 设置mysql客户端默认字符集
default-character-set=utf8mb4

[mysqld]
# 设置mysql客户端连接服务端时默认使用的端口3306
port = 3306

# 设置mysql的安装目录
basedir = D:\\DeveloperTools\\mysql-8.0.36-winx64

# 设置mysql数据库的数据的存放目录
datadir = D:\\DeveloperTools\\mysql-8.0.36-winx64\\data

# 允许最大连接数
max_connections=200

# 允许连接失败的次数。这是为了防止有人从该主机试图攻击数据库系统
max_connect_errors=10

# 服务端使用的字符集默认为8比特编码的latin1字符集【mysql8.0】
character_set_server = utf8mb4

# 创建新表时将使用的默认存储引擎
default-storage-engine=INNODB

# 默认使用“mysql_native_password”插件认证【mysql8.0】
# default_authentication_plugin=mysql_native_password??
authentication_policy=*

# 跳过安全检查,如果跳过，可能不能执行修改用户密码sql语句
#skip-grant-tables

#开启查询缓存
#explicit_defaults_for_timestamp=true

# 创建模式 NO_AUTO_CREATE_USER再MYSQL8.0中已经被移除，不能再8.0以上版本配置【mysql8.0】
# sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES 
# sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION
sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION
```

## 3.初始化MySQL

`mysqld --initialize-insecure;`

## 4.注册MySQL服务

`mysqld -install;`

## 5.启动/停止服务

`net start mysql;`
`net stop mysql;`

## 6.修改默认密码

`mysqladmin -u root password 123456;`

## 7.登陆

`mysql -uroot -p123456;`

## 8.退出

`exit;`

## 9.卸载

`net stop mysql;`  
`mysqld -remove mysql;`

**删除注册表**  
进入注册表编辑（win+R，输入regedit

1. HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\Eventlog\Application\MySQLD 目录删除
2. HKEY_LOCAL_MACHINE\SYSTEM\ControlSet002\Services\Eventlog\Application\MySQLD 目录删除
3. HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Application\MySQLD 目录删除  
注意：注册表中的ControlSet001、ControlSet002不一定是001和002，可能是ControlSet005、006之类，删除的时候都删除就可以

## 10.配置局域网可访问

1. 进入数据库`mysql -u用户名 -p密码;`
2. 选择数据库`use mysql;`
3. 刷新权限`FLUSH PRIVILEGES;`
4. 设置局域网开放`update user set host='%' where user='root';`
5. 停止服务`net stop mysql;`
6. 打开服务`net start mysql;`
